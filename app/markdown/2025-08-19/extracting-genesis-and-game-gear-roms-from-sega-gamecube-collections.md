# Extracting Genesis & Game Gear ROMs from SEGA GameCube collections

<!-- more -->

The GameCube library had multiple SEGA game collections: Sonic Mega Collection,
Sonic Adventure DX, and Sonic Gems Collection which
all contain ROM files for the Genesis and Game Gear (among others).

We'll extract the ROMs from each collection and then compare these GameCube collections to modern
SEGA game collections like Sonic Origins Plus and the Genesis collection for Nintendo Switch Online.

<!-- more -->

| Game                    | Price                                                                                              | Platforms                   | ROM Prices |
|-------------------------|----------------------------------------------------------------------------------------------------|-----------------------------|------------|
| Sonic Mega Collection   | [$10](https://www.pricecharting.com/game/gamecube/sonic-mega-collection)                           | Genesis                     | $225       |
| Sonic Adventure DX      | [$34](https://www.pricecharting.com/game/gamecube/sonic-adventure-dx)                              | Game Gear                   | $334       |
| Sonic Gems Collection   | [$36](https://www.pricecharting.com/game/gamecube/sonic-gems-collection)                           | Genesis, Game Gear, Sega CD | $368       |
| Sonic Origins Plus      | [$40](https://origins.sonicthehedgehog.com/)                                                       | Genesis, Game Gear, Sega CD | $431       |
| Nintendo Switch Online+ | [$50/year](https://www.nintendo.com/us/store/products/sega-genesis-nintendo-switch-online-switch/) | Genesis (and others)        | $186       |

**TLDR:** If you're picking one of above collections to buy for ROMs, the [Sonic Mega Collection](https://www.pricecharting.com/game/gamecube/sonic-mega-collection) is my recommendation.
**10 Genesis games with ROMs for $10 is an incredible deal**, and it includes three of the best games
in the Genesis library being Sonic the Hedgehog 2, Sonic 3 & Knuckles, and Ristar.

[Sonic Origins Plus](https://origins.sonicthehedgehog.com/) is pretty good deal for the games in the collection.
If you're deciding between Origins and [Sonic Adventure DX](https://www.pricecharting.com/game/gamecube/sonic-adventure-dx) you're basically picking
between Sonic 1, 2, 3 and CD versus the main story of Sonic Adventure DX.
I'd probably pick Sonic Origins Plus over Sonic Adventure DX.
If you do buy Sonic Origins Plus for ROMs, [make sure you buy from Steam](https://github.com/farmerbb/RED-Project/issues/144).

[Sonic Gems Collection](https://www.pricecharting.com/game/gamecube/sonic-gems-collection) is a strange one. Two-thirds of the value comes from two games: Sonic R
and Tails' Skypatrol, which might be up your alley, but if not then this collection isn't for you.
The Sonic CD, Sonic R, and Sonic the Fighters files included aren't actual ROMs, instead
they are DOL files so need to be played on a GameCube emulator.

[Genesis for Nintendo Switch Online](https://www.nintendo.com/us/store/products/sega-genesis-nintendo-switch-online-switch/) isn't worth it right now especially as
a yearly subscription. The collection is sorely missing Sonic the Hedgehog 3 and Sonic & Knuckles. Over time this collection
might be actually worth the money, but in all honesty it's tough to beat the value of the Sonic Mega Collection.

Buying any of these collections is an affordable and quality starting point
of a ROM collection for an emulator.
Here's a breakdown of which games are in which collection and their prices:

| Game                             | Platform  | Price                                                                                      | Mega  | SADX     | Gems     | Origins  | NSO+     |
|:---------------------------------|-----------|--------------------------------------------------------------------------------------------|-------|----------|----------|----------|----------|
| Dr. Robotnik's Mean Bean Machine | Genesis   | [$18](https://www.pricecharting.com/game/sega-genesis/dr-robotnik%27s-mean-bean-machine)   | ✅     |          |          |          | ✅        |
| Flicky                           | Genesis   | [$25](https://www.pricecharting.com/game/sega-genesis/flicky)                              | ✅     |          |          |          | ✅        |
| Ristar                           | Genesis   | [$75](https://www.pricecharting.com/game/sega-genesis/ristar)                              | ✅     |          |          |          | ✅        |
| Sonic & Knuckles                 | Genesis   | [$29](https://www.pricecharting.com/game/sega-genesis/sonic-&-knuckles)                    | ✅     |          |          | ✅ (1)    |          |
| Sonic 3D Blast                   | Genesis   | [$12](https://www.pricecharting.com/game/sega-genesis/sonic-3d-blast)                      | ✅     |          |          |          |          |
| Sonic Spinball                   | Genesis   | [$8](https://www.pricecharting.com/game/sega-genesis/sonic-spinball)                       | ✅     |          |          |          |          |
| Sonic the Hedgehog               | Genesis   | [$13](https://www.pricecharting.com/game/sega-genesis/sonic-the-hedgehog)                  | ✅     |          |          | ✅        |          |
| Sonic the Hedgehog 2             | Genesis   | [$10](https://www.pricecharting.com/game/sega-genesis/sonic-the-hedgehog-2)                | ✅     |          |          | ✅        | ✅        |
| Sonic the Hedgehog 3             | Genesis   | [$25](https://www.pricecharting.com/game/sega-genesis/sonic-the-hedgehog-3)                | ✅     |          |          | ✅ (1)    |          |
| Vectorman                        | Genesis   | [$10](https://www.pricecharting.com/game/sega-genesis/vectorman)                           | (2)   |          | ✅        |          | ✅        |
| Vectorman 2                      | Genesis   | [$12](https://www.pricecharting.com/game/sega-genesis/vectorman-2)                         | (2)   |          | ✅        |          |          |
| Bonanza Bros (JP, PAL)           | Genesis   | [$13](https://www.pricecharting.com/game/jp-sega-mega-drive/bonanza-bros)                  |       |          | (3)      |          |          |
| Streets of Rage                  | Genesis   | [$24](https://www.pricecharting.com/game/sega-genesis/streets-of-rage)                     |       |          | (3)      |          | ✅        |
| Streets of Rage 2                | Genesis   | [$24](https://www.pricecharting.com/game/sega-genesis/streets-of-rage-2)                   |       |          | (3)      |          | ✅        |
| Streets of Rage 3                | Genesis   | [$52](https://www.pricecharting.com/game/sega-genesis/streets-of-rage-3)                   |       |          | (3)      |          |          |
| Sonic the Fighters               | Arcade    | ???                                                                                        |       |          | ✅        |          |          |
| Sonic R                          | Saturn    | [$100](https://www.pricecharting.com/game/sega-saturn/sonic-r)                             |       |          | ✅        |          |          |
| Sonic CD                         | Sega CD   | [$40](https://www.pricecharting.com/game/sega-cd/sonic-cd)                                 |       |          | ✅        | ✅        |          |  
| Dr. Robotnik's Mean Bean Machine | Game Gear | [$16](https://www.pricecharting.com/game/sega-game-gear/dr-robotnik%27s-mean-bean-machine) |       | ✅        |          | ✅        |          |
| Sonic Blast                      | Game Gear | [$29](https://www.pricecharting.com/game/sega-game-gear/sonic-blast)                       |       | ✅        |          | ✅        |          |  
| Sonic Chaos                      | Game Gear | [$10](https://www.pricecharting.com/game/sega-game-gear/sonic-chaos)                       |       | ✅        |          | ✅        |          |   
| Sonic Drift (JP)                 | Game Gear | [$11](https://www.pricecharting.com/game/jp-sega-game-gear/sonic-drift)                    |       | ✅        |          | ✅        |          |  
| Sonic Drift 2                    | Game Gear | [$21](https://www.pricecharting.com/game/sega-game-gear/sonic-drift-2)                     |       | ✅        | ✅        | ✅        |          |  
| Sonic Labyrinth                  | Game Gear | [$28](https://www.pricecharting.com/game/sega-game-gear/sonic-labyrinth)                   |       | ✅        |          | ✅        |          |  
| Sonic Spinball                   | Game Gear | [$11](https://www.pricecharting.com/game/sega-game-gear/sonic-spinball)                    |       | ✅        | ✅        | ✅        |          |
| Sonic Triple Trouble             | Game Gear | [$12](https://www.pricecharting.com/game/sega-game-gear/sonic-the-hedgehog-triple-trouble) |       | ✅        | ✅        | ✅        |          |      
| Sonic the Hedgehog               | Game Gear | [$14](https://www.pricecharting.com/game/sega-game-gear/sonic-the-hedgehog)                |       | ✅        |          | ✅        |          | 
| Sonic the Hedgehog 2             | Game Gear | [$6](https://www.pricecharting.com/game/sega-game-gear/sonic-the-hedgehog-2)               |       | ✅        |          | ✅        |          |
| Tails Adventure                  | Game Gear | [$60](https://www.pricecharting.com/game/sega-game-gear/tails%27-adventure)                |       | ✅        | ✅        | ✅        |          | 
| Tails' Skypatrol (JP)            | Game Gear | [$96](https://www.pricecharting.com/game/jp-sega-game-gear/tails'-skypatrol)               |       | ✅        | ✅        | ✅        |          |
| Totals                           |           | **$691**                                                                                   | **$225** | **$352** | **$314** | **$431** | **$186** |

> **NOTE (1):** The soundtrack for Sonic the Hedgehog 3 (and thus, Sonic 3 & Knuckles)
> has been changed since the original release. I prefer the [original soundtrack](https://www.youtube.com/playlist?list=PLvNp0Boas721ZhOX_U084B4Jrxdr8rJOj), so if you do too then know that it's
> not included with "Sonic Origins Plus".

> **NOTE (2):** Japanese editions of Sonic Mega Collection also contain both Vectorman and Vectorman 2.

> **NOTE (3):** Japanese editions of Sonic Gems Collection also contain Bonanza Bros and Streets of Rage 1, 2, and 3.

## Sonic Mega Collection

Sonic Mega Collection contains the ROMs for 10 Genesis games 
that are all compressed using SEGA "PRS" compression.
Unfortunately there's no magic string for PRS compression,
you just have to *know* that's what is being used:

* Dump and open the ISO in Dolphin.
* Right-click the ISO, `Properties`, `Filesystem` tab.
* Under `sonic/data/` select the `roms` directory. Right-click and select `Extract`.
* [Download and compile this C++ program](https://gist.github.com/sethmlarson/f22e7c10757fa969c10c1451b955787d). (`$ g++ dat2bin.cpp -o dat2bin`)
* Run the program on all `.dat` files (`$ for f in *.dat; do ./dat2bin $f ${f::-4}.md; done`)
* Truncate the ROM `knu_p2u.md` to 3407872 bytes (`$ truncate knu_p2u.md --size=3407872`). For whatever reason, this ROM decompresses with a few `NUL` bytes at the end.

Not only does Sonic Mega Collection contain ROMs from actual cartridges,
the collection also includes the "ROMs" `knu_p1u.md`, `knu_p2u.md`, and `knu_p3u.md`
which are the result from combining Sonic & Knuckles with Sonic the Hedgehog 1, 2 and 3
using <nobr>"[LOCK-ON Technology](https://sonic.fandom.com/wiki/Lock-on_technology)"</nobr>.

After decompressing the ROMs you should end up with files with these checksums:

| Filename | Game                                      | Length | MD5 |
|-|-------------------------------------------|-|-|
| `drobotnk.md` | Dr. Robotnik's Mean Bean Machine          | 1048576 | `4D6BDAC51D2F5969A91496142EA53232` |
| `flicky.md` | Flicky                                    | 131072 | `805CC0B3724F041126A57A4D956FD251` |
| `knu_p1u.md` | Sonic & Knuckles + Sonic The Hedgehog     | 2621440 | `17FFE04BB891253E7AC3FB0952BB2EDB` |
| `knu_p2u.md` | Sonic & Knuckles + Sonic The Hedgehog 2   | 3407872 | `3E5E4B18D035775B916A06F2B3DC5031` |
| `knu_p3u.md` | Sonic & Knuckles + Sonic The Hedgehog 3   | 4194304 | `C5B1C655C19F462ADE0AC4E17A844D10` |
| `ristaru.md` | Ristar                                    | 2097152 | `62E40B8C8012D02DF4FAC1C68F10EB16` |
| `s_spnu.md` | Sonic Spinball                            | 1048576 | `841E347B30A6E298EE2B0C722F19FE74` |
| `sonic1j.md` | Sonic The Hedgehog (Japan, Europe, Korea) | 524288 | `09DADB5071EB35050067A32462E39C5F` |
| `sonic1jb.md` | Sonic The Hedgehog (USA, Europe)          | 524288 | `C6C15AEA60BDA10AE11C6BC375296153` |
| `sonic1u.md` | Sonic The Hedgehog (World)                | 524288 | `1BC674BE034E43C96B86487AC69D9293` |
| `sonic2jb.md` | Sonic The Hedgehog 2                      | 1048576 | `2A4CC74873D3117629E454666E39E654` |
| `sonic3d.md` | Sonic 3D Blast                            | 4194304 | `50ACBEA2461D179B2BF11460A1CC6409` |
| `sonic3u.md` | Sonic The Hedgehog 3                      | 2097152 | `D724EA4DD417FE330C9DCFD955C596B2` |

## Sonic Adventure DX

Sonic Adventure DX contains the ROMs for 12 Game Gear games. Extracting them
is similar to Sonic Mega Collection, but the PRS compression
has changed slightly so you need a different decompression script.

* Dump and open the ISO in Dolphin.
* Right-click the ISO, `Properties`, `Filesystem` tab.
* Unfortunately there aren't any directories to help us here.
  I recommend extracting the whole disk into a directory.
* Download [this Python script](https://gist.github.com/sethmlarson/423637d495d3580fef8061ae9233c154) and Python 3.11+.
* Run `$ python prs-to-gg.py *.prs` and the Game Gear ROMs will be decompressed.

| Filename | Game                                | Length | MD5 |
|-|-------------------------------------|-|-|
| `g-sonic.gg` | Sonic Blast                         | 1048576 | `56E1561D981A9A7C240CDD8D5580CCF0` |
| `labylin.gg` | Sonic Labyrinth                     | 524288 | `AA6598585B2CDB92A14476BEEB34991B` |
| `mbmachin.gg` | Dr. Robotnik's Mean Bean Machine    | 262144 | `6565DDCB2E41BF9CE5771A62D30AA700` |
| `s-drift2.gg` | Sonic Drift 2                       | 524288 | `B39D1E9A40DFD3508EE4003CD28DA452` |
| `s-tail2.gg` | Sonic The Hedgehog - Triple Trouble | 524288 | `F0F7E4DFE2908F0030E64FD9ED843422` |
| `skypat.gg` | Tails' Skypatrol (Japan)            | 262144 | `FFB364BBAF72881CF7571E7EC388490D` |
| `sonic-ch.gg` | Sonic Chaos                         | 524288 | `895CA34F733C445341E5CA1642527690` |
| `sonic.gg` | Sonic The Hedgehog                  | 262144 | `B1DE7027824C434CE8DE59782705F5C9` |
| `sonic2.gg` | Sonic The Hedgehog 2                | 524288 | `9C64846563D8B9A24400471322E53FB5` |
| `sonic_tt.gg` | Sonic & Tails 2 (Japan)                    | 524288 | `05F5B6201CCECE80FACAF99FA7CF5A6E` |
| `sonicdri.gg` | Sonic Drift (Japan)                 | 524288 | `8093EF0EEB147F2A938FAE3E5A26D8B3` |
| `sonictai.gg` | Sonic & Tails (Japan)                      | 524288 | `AAC8371D2179295159C73AE2CB92892D` |
| `spinball.gg` | Sonic Spinball                      | 524288 | `8E3B44FDA375AD9748B678E9C6B45502` |
| `tailsadv.gg` | Tails Adventure                     | 524288 | `A8BDB1BEED088FF83C725C5AF6B85E1F` |

## Sonic Gems Collection

Unfortunately the ROMs in the Sonic Gems Collection aren't simply
compressed, they are obfuscated using a custom routine. The most interesting titles that
distinguish Sonic Gems Collection from others (Sonic CD and Sonic R)
aren't stored as ROMs for their respective systems. Instead, these games appear to be compiled as
DOL files, meaning they can't be played using a typical Sega CD or Sega Saturn
emulator.

* Dump an open the ISO in Dolphin.
* Right-click the ISO, `Properties`, `Filesystem` tab.
* Under `ggrom` and `mdrom_us` select all the `.cpt` files.
* These `.cpt` files are the obfuscated ROM files.

There appear to be many more ROMs than are playable within the game itself,
maybe hinting that this collection is more worth it than at first glance?
